
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tic-Tac-Toe</title>
<style>
body {
    font-family: 'Arial', sans-serif;
    text-align: center;
    background-color: #f9f9f9;
    margin: 0;
    padding: 50px 0;
}

h1 {
    margin-bottom: 20px;
    color: #333;
}

#board {
    display: grid;
    grid-template-columns: repeat(3, 100px);
    grid-template-rows: repeat(3, 100px);
    gap: 5px;
    justify-content: center;
    margin-bottom: 20px;
    box-shadow: 0 0 20px rgba(0,0,0,0.1);
    padding: 10px;
    background-color: #fff;
    border-radius: 10px;
    position: relative;
}

.cell {
    background-color: #f0f0f0;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 50px;
    cursor: pointer;
    border-radius: 5px;
    transition: 0.3s;
    font-weight: bold;
    user-select: none;
}

.cell:hover {
    background-color: #e0e0e0;
}

.cell.x { color: #1e90ff; }
.cell.o { color: #ff4d4d; }

.cell.win { background-color: #fffa65; }

#message {
    margin-bottom: 20px;
    font-size: 20px;
    color: #555;
}

#restart {
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
    border: none;
    background-color: #1e90ff;
    color: white;
    border-radius: 5px;
    transition: 0.3s;
}

#restart:hover { background-color: #0d6efd; }

/* Winning line */
#line {
    position: absolute;
    height: 5px;
    background-color: gold;
    border-radius: 5px;
    transform-origin: left center;
    display: none;
    z-index: 1;
    transition: width 0.5s ease;
}
</style>
</head>
<body>
<h1>Tic-Tac-Toe</h1>
<div id="board">
    <div class="cell" data-pos="a"></div>
    <div class="cell" data-pos="b"></div>
    <div class="cell" data-pos="c"></div>
    <div class="cell" data-pos="d"></div>
    <div class="cell" data-pos="e"></div>
    <div class="cell" data-pos="f"></div>
    <div class="cell" data-pos="g"></div>
    <div class="cell" data-pos="h"></div>
    <div class="cell" data-pos="i"></div>
    <div id="line"></div>
</div>
<h2 id="message">Turn: X</h2>
<button id="restart">Restart Game</button>

<script>
let board = { a:'',b:'',c:'',d:'',e:'',f:'',g:'',h:'',i:'' };
const winCombos = [
    ['a','b','c'], ['d','e','f'], ['g','h','i'],
    ['a','e','i'], ['c','e','g'], ['a','d','g'],
    ['b','e','h'], ['c','f','i']
];

let turn = 'X';
let gameOver = false;
const message = document.getElementById('message');
const cells = document.querySelectorAll('.cell');
const line = document.getElementById('line');

function getCellPosition(pos) {
    const cell = document.querySelector(`.cell[data-pos="${pos}"]`);
    const rect = cell.getBoundingClientRect();
    const boardRect = document.getElementById('board').getBoundingClientRect();
    return {
        x: rect.left - boardRect.left + rect.width/2,
        y: rect.top - boardRect.top + rect.height/2
    };
}

function showWinningLine(combo) {
    const p1 = getCellPosition(combo[0]);
    const p2 = getCellPosition(combo[2]);
    const dx = p2.x - p1.x;
    const dy = p2.y - p1.y;
    const length = Math.sqrt(dx*dx + dy*dy);
    const angle = Math.atan2(dy, dx) * 180 / Math.PI;
    line.style.width = '0px';
    line.style.left = p1.x + 'px';
    line.style.top = p1.y - 2.5 + 'px';
    line.style.transform = `rotate(${angle}deg)`;
    line.style.display = 'block';
    setTimeout(() => line.style.width = length + 'px', 50); // Animate line
}

function checkWin(playerMoves) {
    for (let combo of winCombos) {
        if (combo.every(pos => playerMoves.includes(pos))) {
            combo.forEach(pos => document.querySelector(`.cell[data-pos="${pos}"]`).classList.add('win'));
            showWinningLine(combo);
            return true;
        }
    }
    return false;
}

cells.forEach(cell => {
    cell.addEventListener('click', () => {
        const pos = cell.getAttribute('data-pos');
        if (board[pos] === '' && !gameOver) {
            board[pos] = turn;
            cell.textContent = turn;
            cell.classList.add(turn.toLowerCase());

            const playerMoves = Object.keys(board).filter(key => board[key] === turn);

            if (checkWin(playerMoves)) {
                message.textContent = `${turn} Wins!`;
                gameOver = true;
            } else if (Object.values(board).every(v => v !== '')) {
                message.textContent = "It's a Draw!";
                gameOver = true;
            } else {
                turn = turn === 'X' ? 'O' : 'X';
                message.textContent = `Turn: ${turn}`;
            }
        }
    });
});

document.getElementById('restart').addEventListener('click', () => {
    board = { a:'',b:'',c:'',d:'',e:'',f:'',g:'',h:'',i:'' };
    cells.forEach(cell => {
        cell.textContent = '';
        cell.className = 'cell';
    });
    line.style.display = 'none';
    line.style.width = '0px';
    turn = 'X';
    gameOver = false;
    message.textContent = `Turn: ${turn}`;
});
</script>
</body>
</html>
